# **Ziin**Drive - 스프링 프레임워크와 js로 구현한 파일 저장용 CRUD 웹사이트

**Ziin**Drive는 저의 첫 스프링 프로젝트로, 뭘 만들까 고민하다가 CRUD 정도는 만들 줄 알아야 된다는 얘기를 듣고 대표적인 CRUD 웹사이트인 Google Drive에서 영감을 받아 만든 ~~(사실상 구글드라이브 짭)~~ 프로그램입니다.

-   처음 만들 때는 api 설계에 대해 아는 바가 없어 GPT 말만 들으면서 `GET`과 `POST`만 남발하다가 전혀 RESTful하지 않다는 것을 알게 되었고... 결국 정석적인 방향으로 API 설계 공부를 하기 위해 최대한 REST형식을 따르도록 모든 매핑을 뜯어고친 전적이 있습니다. (GET/POST/PATCH/DELETE 등 메소드 사용)

-   프론트와 백의 역할까지 분리된 제대로 된 REST 프로젝트로 만들기 위해 기존에 쓰던 타임리프 대신 모든 데이터를 js로 렌더링하는 방식을 사용하고 있습니다

-   주인장은 프론트랑은 그닥 맞지 않는 사람이라서(할 줄은 앎.. 근데 진짜 기본적인거 할 줄만 알고 좋아하진않음;;;) 이제 UI 꾸미기를 도와주실 html 및 css를 매우 잘 다루시고 개쩌는 미감을 가지신 분이 나타나주시면 정말 좋을것 같읍니다...

## 기능 소개

-   오프닝 화면 (`static/index.html`)

    -   Welcome 문구와 시작 버튼을 임시로 달아 놓은 상태
    -   나중에 이 페이지에 그림도 넣고 사용자 로그인 기능 등을 추가해서 발전시킬 예정

-   메인 화면 (모든 파일 보기)

    -   `/files`로 들어가면 볼 수 있는 맨 처음 나오는 화면
    -   화면 위쪽의 로고를 누르거나 검색어를 모두 초기화한 상태에서 검색을 누르면 메인 화면으로 이동 가능
    -   입력한 모든 검색어 및 검색 조건은 자동 초기화됨
    -   **[새로운 기능]** _이름이 뷰에서 보기에 길 경우를 대비해 truncatedName(... 으로 줄인 이름) 표시 추가 및 originalName(풀네임)과 구분함_

-   파일 업로드

    -   확장자 검사 및 파일 크기 포매팅
    -   UUID 생성하여 파일 저장
    -   파일 업로드 후에는 자동으로 메인 화면으로 돌아감
    -   이름 길이나 문자 제한 윈도우 예약어 제한, 파일 용량 제한 기능 탑재

-   파일 다운로드

    -   파일의 고유 id를 받아 `Resource` 형태로 반환, 브라우저에서 받은 파일 리소스를 저장

-   정렬

    -   최신순, 이름순, 오래된순 정렬 가능
    -   정렬을 바꿔도 페이지는 새로고침되지 않고 데이터만 리렌더링됨

-   검색

    -   제목(제목에 포함되는 단어), 확장자, 기간별로 검색 가능
    -   초기화 버튼을 통해 편리하게 검색조건을 모두 비울 수 있음 (메인 화면으로 바로 돌아가지는 않음!)
    -   제목 찾기 기능은 추후 수정 예정 (띄어쓰기 무시 등)

-   이름 수정

    -   사용자는 파일의 이름 외에 다른 정보를 수정할 수 없음
    -   이름 길이 제한, 문자 제한, 예약어 제한 기능 탑재
    -   변경 제한 조건에 해당되지 않을 시 수정된 이름으로 즉시 데이터 리렌더링

-   즐겨찾기

    -   다운로드 버튼 옆 하트 버튼을 눌러 파일을 즐겨찾기에 추가/해제할 수 있음
    -   즐겨찾기한 파일은 사이드메뉴의 '즐겨찾기' 탭에서 모아 볼 수 있음, 즐겨찾기한 파일 중에서만 검색하는 기능도 제공됨

-   삭제

    -   DB(메타데이터)와 실제 파일 저장소에서 파일이 모두 삭제됨
    -   삭제된 파일 데이터 제외하고 다시 검색하여 파일 목록 리렌더링
    -   삭제한 파일은 사이드메뉴의 '휴지통' 탭에서 볼 수 있으며, 복원/영구삭제/휴지통 비우기 등의 작업이 가능함

---

### 기능별 API 소개

-   모든 파일:

    -   뷰 로딩: `GET /files`
    -   데이터 로딩: `GET /api/files`

-   검색:

    -   뷰 로딩: `GET /files/search?(파라미터)`
    -   데이터 로딩: `GET /api/files` (모든파일과 같은 메소드로 처리)

-   정렬:

    -   현재 저장된 정렬 기준: `GET /api/files/sort`
    -   새로 정렬한 파일 목록 로딩: `GET /api/files?sort=(정렬 기준)`\
        (`GET /api/files` 에서 정렬만 바꿔주고 메소드 자체는 그대로 사용)

-   업로드: `POST /api/files`

-   다운로드: `GET /api/files/{id}`

-   이름 수정: `PATCH /api/files/{id}`

-   즐겨찾기: `PATCH /api/files/favorite/{id}`

-   삭제: `DELETE /api/files/{id}`

---

#### 즐겨찾기

-   메인화면:

    -   뷰 로딩: `GET /favorites` (즐찾만 찾을수 있도록 여기서 검색옵션을 바꿔줌)
    -   데이터 로딩: `GET /api/files` (공통 메소드)

-   검색:

    -   뷰 로딩: `GET /favorites/search?(파라미터)`
    -   데이터 로딩: `GET /api/files` (공통 메소드)

-   즐겨찾기 해제: `PATCH /api/favorites/{id}` (즐겨찾기 해제하는 즉시 즐겨찾기 메뉴의 파일들이 다시 로딩됨)

---

#### 휴지통

-   메인화면:

    -   뷰 로딩: `GET /bin`
    -   데이터 로딩: `GET /api/files` (공통 메소드)

-   복원: `PATCH /api/bin/{id}`

-   영구 삭제:

    -   파일 하나만 삭제: `DELETE /api/bin/{id}`
    -   휴지통 전체 비우기: `DELETE /api/bin`

## 추가할 기능

-   아직 `localhost:8080`에서만 불러올 수 있는 사이트라서 언젠가 실제 url로 배포해보고 싶은 생각이 있습니당

-   사용자 계정별로 로그인, 분류하는 기능 만들 예정

    -   SQL 좀더 공부해 오겠습니다.....
    -   로그인할 때 `localStorage`에 아이디랑 마지막 로그인 날짜 기록하고 3개월 지나면 정보 삭제하기!

-   여러 사용자 간의 공유 폴더 만들기
    -   사용자, 파일이 모두 m:n으로 매칭되는 형태라 꽤나 시간 걸릴듯..
